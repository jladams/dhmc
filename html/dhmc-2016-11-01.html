<!doctype html>
<html lang="en">
<head>
<title>dhmc-2016-11-01</title>
<meta name="generator" content="Etherpad">
<meta name="author" content="Etherpad">
<meta name="changedby" content="Etherpad">
<meta charset="utf-8">
<style> * { font-family: "Courier New", Courier, monospace;
font-size: 13px;
line-height: 17px; }ul.indent { list-style-type: none; }ol { list-style-type: none; padding-left:0;}body > ol { counter-reset: first second third fourth fifth sixth seventh eigth ninth tenth eleventh twelth thirteenth fourteenth fifteenth sixteenth; }ol > li:before {content: counter(first) ". " ;counter-increment: first;}ol > ol > li:before {content: counter(first) "." counter(second) ". " ;counter-increment: second;}ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) ". ";counter-increment: third;}ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) ". ";counter-increment: fourth;}ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) ". ";counter-increment: fifth;}ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) ". ";counter-increment: sixth;}ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) ". ";counter-increment: seventh;}ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) ". ";counter-increment: eigth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) ". ";counter-increment: ninth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) "." counter(tenth) ". ";counter-increment: tenth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) ". ";counter-increment: eleventh;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelth) ". ";counter-increment: twelth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelth) "." counter(thirteenth) ". ";counter-increment: thirteenth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eigth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelth) "." counter(thirteenth) "." counter(fourteenth) ". ";counter-increment: fourteenth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "."  counter(eigth) "."  counter(ninth) "."  counter(tenth) "."  counter(eleventh) "."  counter(twelth) "."  counter(thirteenth) "."  counter(fourteenth) "." counter(fifteenth) ". ";counter-increment: fifteenth;}ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "."  counter(eigth) "."  counter(ninth) "."  counter(tenth) "."  counter(eleventh) "."  counter(twelth) "."  counter(thirteenth) "."  counter(fourteenth) "."  counter(fifteenth) "."  counter(sixthteenth) ". ";counter-increment: sixthteenth;}ol{ text-indent: 0px; }ol > ol{ text-indent: 10px; }ol > ol > ol{ text-indent: 20px; }ol > ol > ol > ol{ text-indent: 30px; }ol > ol > ol > ol > ol{ text-indent: 40px; }ol > ol > ol > ol > ol > ol{ text-indent: 50px; }ol > ol > ol > ol > ol > ol > ol{ text-indent: 60px; }ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 70px; }ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 80px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 90px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 100px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 110px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol { text-indent: 120px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 130px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 140px; }ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol{ text-indent: 150px; }</style>
</head>
<body><strong># Thank you for coming to today&#x27;s presentation!</strong><br><strong># I&#x27;ve included some of the code we&#x27;ll be using today on this Etherpad.</strong><br><br><strong># ------------------------------------------------</strong><br><strong># Downloads</strong><br><strong># Here&#x27;s where you can download R: </strong><a href="http&#x3a;&#x2F;&#x2F;cran&#x2e;cnr&#x2e;berkeley&#x2e;edu&#x2F;"><strong>http:&#x2F;&#x2F;cran.cnr.berkeley.edu&#x2F;</strong></a><br><strong># Here&#x27;s where you can download RStudio: </strong><a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rstudio&#x2e;com&#x2F;products&#x2F;rstudio&#x2F;download&#x2F;"><strong>https:&#x2F;&#x2F;www.rstudio.com&#x2F;products&#x2F;rstudio&#x2F;download&#x2F;</strong></a><br><br><strong># ------------------------------------------------</strong><br><strong># Getting Started With R</strong><br><strong># Variables</strong><br>new_int &lt;- 4<strong> # &#x27;new_int&#x27; is a name we made up - variables can be called whatever is easy for you to remember</strong><br>new_int<br><br>cos(new_int) <strong># Finds the cosine of the value stored in new_int</strong><br>cos(4)<br><br><strong># Functions</strong><br>new_fun &lt;- function(x) { <strong># Creates a function called new_fun that takes one argument, &quot;x&quot;</strong><br><ul class="indent"><li>my_int &lt;- x <strong># Stores &quot;x&quot; as my_int</strong></li><li>your_int &lt;- my_int * 2 <strong># Stores x * 2 as your_int</strong></li><li>cat(&quot;My integer is &quot;,my_int,&quot; and your integer is &quot;,your_int) <strong># Prints out a result telling us each our numbers</strong></li></ul>}<br><br>new_fun(4) <strong># Try it out with any number</strong><br><br><strong># ------------------------------------------------</strong><br><br><strong># Tidy Data</strong><br><strong># Link to paper: </strong><a href="http&#x3a;&#x2F;&#x2F;vita&#x2e;had&#x2e;co&#x2e;nz&#x2F;papers&#x2F;tidy&#x2d;data&#x2e;pdf"><strong>http:&#x2F;&#x2F;vita.had.co.nz&#x2F;papers&#x2F;tidy-data.pdf</strong></a><br><br><strong># ------------------------------------------------</strong><br><br><strong># Install Packages We&#x27;ll Use</strong><br>install.packages(&quot;tidyverse&quot;)<br><br><strong># Load packages into work environment</strong><br>library(tidyverse)<br><br><strong># Original Data Source, for the curious: </strong><a href="https&#x3a;&#x2F;&#x2F;www&#x2e;healthdata&#x2e;gov&#x2F;dataset&#x2F;deaths&#x2d;pnuemonia&#x2d;and&#x2d;influneza&#x2d;and&#x2d;all&#x2d;deaths&#x2d;state&#x2d;and&#x2d;region&#x2d;national&#x2d;center&#x2d;health"><strong>https:&#x2F;&#x2F;www.healthdata.gov&#x2F;dataset&#x2F;deaths-pnuemonia-and-influneza-and-all-deaths-state-and-region-national-center-health</strong></a><br><br><strong># Read data from URL</strong><br>df &lt;- read_csv(&quot;<a href="http&#x3a;&#x2F;&#x2F;bit&#x2e;ly&#x2F;dhmc&#x2d;11&#x2d;01&#x2d;16&#x2d;deaths">http:&#x2F;&#x2F;bit.ly&#x2F;dhmc-11-01-16-deaths</a>&quot;)<br><br><strong># Write data to local file to avoid re-downloading every time</strong><br>write_csv(df, &quot;PATH&#x2F;TO&#x2F;YOUR&#x2F;DATA&#x2F;FOLDER&#x2F;filename.csv&quot;)<br><br><strong># Read in local copy whenever you need it</strong><br>df &lt;- read_csv(&quot;PATH&#x2F;TO&#x2F;YOUR&#x2F;DATA&#x2F;FOLDER&#x2F;filename.csv&quot;)<br><br><strong># Times when it&#x27;s fine for data not to be perfectly tidy</strong><br>regional &lt;- df %&gt;%<br>&nbsp; filter(geoid == &quot;Region&quot; &amp; age == &quot;All&quot;)<br><br>ggplot(regional, aes(x = flu, y = pneumonia)) +<br>&nbsp; geom_point()<br><br>ggplot(regional, aes(x = flu, y = pneumonia))<br><br>ggplot(regional, aes(x = flu, y = pneumonia)) +<br>&nbsp; geom_point(color = &quot;red&quot;)<br><br>ggplot(regional, aes(x = flu, y = pneumonia)) +<br>&nbsp; geom_point(aes(color = region))<br><br><br><strong># Other times when it&#x27;s easier for it to be tidy</strong><br><strong># When your data is un-tidy, it takes more work to create visualizations of it</strong><br>national &lt;- df %&gt;%<br>&nbsp; filter(geoid == &quot;National&quot; &amp; age == &quot;All&quot;)<br><br>national_seasons &lt;- national %&gt;%<br>&nbsp; group_by(season_start) %&gt;%<br>&nbsp; summarize(flu = sum(flu), pneumonia = sum(pneumonia), all_deaths = sum(all_deaths))<br><br>p &lt;- ggplot(national_seasons) +<br>&nbsp; geom_line(aes(x = season_start, y = flu)) +<br>&nbsp; geom_text(aes(x = season_start, y = flu, label = flu)) +<br>&nbsp; geom_line(aes(x = season_start, y = pneumonia)) +<br>&nbsp; geom_text(aes(x = season_start, y = pneumonia, label = pneumonia)) +<br>&nbsp; geom_line(aes(x = season_start, y = all_deaths)) +<br>&nbsp; geom_text(aes(x = season_start, y = all_deaths, label = all_deaths))<br><br>print(p)<br><br><strong># This helps tidy it up</strong><br>national_tidy &lt;- national_seasons %&gt;%<br>&nbsp; gather(variable, value, flu:all_deaths)<br><br><strong># See how many fewer lines of code it takes to create a good visualization</strong><br>p &lt;- ggplot(national_tidy) +<br>&nbsp; geom_line(aes(x = season_start, y = value, group = variable, color = variable)) +<br>&nbsp; geom_text(aes(x = season_start, y = value, label = value))<br><br>print(p)<br><br><strong># Faceting in ggplot2</strong><br><strong># Creates a data frame that includes ages</strong><br>national_age &lt;- df %&gt;%<br>&nbsp; filter(geoid == &quot;National&quot; &amp; age != &quot;All&quot;) %&gt;%<br>&nbsp; group_by(season_start, age) %&gt;%<br>&nbsp; summarize(flu = sum(flu), pneumonia = sum(pneumonia)) %&gt;%<br>&nbsp; gather(illness, deaths, flu:pneumonia)<br><br><strong># Use the facet_grid command, and pass it arguments for how you&#x27;d like to separate the data</strong><br>p &lt;- ggplot(national_age, aes(x = illness, y = deaths)) +<br>&nbsp; geom_bar(aes(fill = illness), stat = &quot;identity&quot;) +<br>&nbsp; facet_grid(age~season_start)<br><br>print(p)<br><br><br><strong># Other Resources</strong><br>ggplot2 cheat sheet: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rstudio&#x2e;com&#x2F;wp&#x2d;content&#x2F;uploads&#x2F;2015&#x2F;03&#x2F;ggplot2&#x2d;cheatsheet&#x2e;pdf">https:&#x2F;&#x2F;www.rstudio.com&#x2F;wp-content&#x2F;uploads&#x2F;2015&#x2F;03&#x2F;ggplot2-cheatsheet.pdf</a><br>RStudio cheat sheet: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rstudio&#x2e;com&#x2F;wp&#x2d;content&#x2F;uploads&#x2F;2016&#x2F;01&#x2F;rstudio&#x2d;IDE&#x2d;cheatsheet&#x2e;pdf">https:&#x2F;&#x2F;www.rstudio.com&#x2F;wp-content&#x2F;uploads&#x2F;2016&#x2F;01&#x2F;rstudio-IDE-cheatsheet.pdf</a><br>Data wrangling (tidyr and dplyr) cheat sheet: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rstudio&#x2e;com&#x2F;wp&#x2d;content&#x2F;uploads&#x2F;2015&#x2F;02&#x2F;data&#x2d;wrangling&#x2d;cheatsheet&#x2e;pdf">https:&#x2F;&#x2F;www.rstudio.com&#x2F;wp-content&#x2F;uploads&#x2F;2015&#x2F;02&#x2F;data-wrangling-cheatsheet.pdf</a><br><br><br><br><br></body>
</html>
